<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- meta tags -->
    <base href="/">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <!-- title -->
    <title>Lovcare - Senior And Elderly Care HTML5 Template</title>

    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="assets/img/logo/favicon.png">

    <!-- css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/all-fontawesome.min.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/nice-select.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>

    <title>React App</title>
  </head>
 
  <header class="header">

        <!-- navbar -->
        <div class="main-navigation">
            <nav class="navbar navbar-expand-lg">
                <div class="container position-relative">
                    <a class="navbar-brand" href="/Home">
                        <img src="assets/img/logo/logo.png" alt="logo">
                    </a>
                    <div class="mobile-menu-right">
                        <div class="mobile-menu-btn">
                            <button type="button" class="nav-right-link search-box-outer"><i
                                    class="far fa-search"></i></button>
                        </div>
                        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar"
                            aria-label="Toggle navigation">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>
                    </div>
                    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                        aria-labelledby="offcanvasNavbarLabel">
                        <div class="offcanvas-header">
                            <a href="index.html" class="offcanvas-brand" id="offcanvasNavbarLabel">
                                <img src="assets/img/logo/logo.png" alt="">
                            </a>
                            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"><i
                                    class="far fa-xmark"></i></button>
                        </div>
                        <div class="offcanvas-body gap-xl-4">
                            <ul class="navbar-nav justify-content-end flex-grow-1">
                                <li class="nav-item"><a class="nav-link" href="/Home">Home</a></li>

                                <li class="nav-item"><a class="nav-link" href="/About">About</a></li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Services</a>
                                    <ul class="dropdown-menu fade-down">
                                        <li><a class="dropdown-item" href="service.html">Services One</a></li>
                                        <li><a class="dropdown-item" href="service-2.html">Services Two</a></li>
                                        <li><a class="dropdown-item" href="service-single.html">Service Single</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Pages</a>
                                    <ul class="dropdown-menu fade-down">
                                        <li><a class="dropdown-item" href="about.html">About Us</a></li>
                                        <li><a class="dropdown-item" href="team.html">Our Team</a></li>
                                        <li><a class="dropdown-item" href="pricing.html">Pricing Plan</a></li>
                                        <li class="dropdown-submenu">
                                            <a class="dropdown-item dropdown-toggle" href="#">Events</a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="event.html">Events</a></li>
                                                <li><a class="dropdown-item" href="event-single.html">Event Single</a></li>
                                            </ul>
                                        </li>
                                        <li class="dropdown-submenu">
                                            <a class="dropdown-item dropdown-toggle" href="#">Donations</a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="donation.html">Donations</a></li>
                                                <li><a class="dropdown-item" href="donation-single.html">Donation Single</a>
                                                </li>
                                                <li><a class="dropdown-item" href="donation-form.html">Donation Form</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="dropdown-submenu">
                                            <a class="dropdown-item dropdown-toggle" href="#">Volunteer</a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="volunteer.html">Volunteer</a></li>
                                                <li><a class="dropdown-item" href="volunteer-single.html">Volunteer
                                                        Single</a></li>
                                                <li><a class="dropdown-item" href="become-volunteer.html">Become A
                                                        Volunteer</a></li>
                                            </ul>
                                        </li>
                                        <li class="dropdown-submenu">
                                            <a class="dropdown-item dropdown-toggle" href="#">Living Options</a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="living-option.html">Living Options</a>
                                                </li>
                                                <li><a class="dropdown-item" href="living-option-single.html">Living Options
                                                        Single</a></li>
                                            </ul>
                                        </li>
                                        <li class="dropdown-submenu">
                                            <a class="dropdown-item dropdown-toggle" href="#">Stories</a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="stories.html">Stories</a></li>
                                                <li><a class="dropdown-item" href="stories-single.html">Stories Single</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="dropdown-submenu">
                                            <a class="dropdown-item dropdown-toggle" href="#">Authentication</a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="login.html">Login</a></li>
                                                <li><a class="dropdown-item" href="register.html">Register</a></li>
                                                <li><a class="dropdown-item" href="forgot-password.html">Forgot
                                                        Password</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="dropdown-submenu">
                                            <a class="dropdown-item dropdown-toggle" href="#">Extra Pages</a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="coming-soon.html">Coming Soon</a>
                                                </li>
                                                <li><a class="dropdown-item" href="terms.html">Terms Of Service</a></li>
                                                <li><a class="dropdown-item" href="privacy.html">Privacy Policy</a></li>
                                            </ul>
                                        </li>
                                        <li><a class="dropdown-item" href="gallery.html">Gallery</a></li>                           
                                        <li><a class="dropdown-item" href="faq.html">Faq's</a></li>
                                        <li><a class="dropdown-item" href="testimonial.html">Testimonials</a></li>
                                        <li><a class="dropdown-item" href="404.html">404 Error</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Portfolio</a>
                                    <ul class="dropdown-menu fade-down">
                                        <li><a class="dropdown-item" href="portfolio.html">Portfolio One</a></li>
                                        <li><a class="dropdown-item" href="portfolio-2.html">Portfolio Two</a></li>
                                        <li><a class="dropdown-item" href="portfolio-single.html">Portfolio Single</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Blog</a>
                                    <ul class="dropdown-menu fade-down">
                                        <li><a class="dropdown-item" href="blog.html">Blog</a></li>
                                        <li><a class="dropdown-item" href="blog-single.html">Blog Single</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                            </ul>
                            <!-- nav-right -->
                            <div class="nav-right">
                                <div class="search-btn">
                                    <button type="button" class="nav-right-link search-box-outer"><i
                                            class="far fa-search"></i></button>
                                </div>
                                <!-- <div class="nav-btn">
                                    <a href="contact.html" class="theme-btn">Let's Talk<i
                                            class="fas fa-circle-arrow-right"></i></a>
                                </div> -->
                                <div style="display: flex; align-items: center; margin-left: 15px;">
                                    <img 
                                        id="user-avatar"
                                        src="assets/img/user.png" 
                                        alt="User Avatar" 
                                        style="width: 40px; height: 40px; border-radius: 50%; cursor: pointer; object-fit: cover;"
                                        onclick="window.location.href='/student'"
                                    />
                                    <div id="username-container" style="margin-left: 10px; font-weight: bold;font-size: 12px;"></div>

                                </div>
                                <script> 
                                    // Fonction pour récupérer le nom d'utilisateur à partir du JWT
                                    function useAuth() {
                                        const token = localStorage.getItem('jwt-token');
                                        if (token) {
                                            try {
                                                const decoded = jwt_decode(token);
                                                const currentTime = Date.now() / 1000; 
                                
                                                if (decoded.exp < currentTime) {
                                                    console.warn('Token expiré. Redirection vers /login');
                                                    localStorage.removeItem('jwt-token');
                                                    window.location.href = '/login';
                                                    return;
                                                }
                                
                                                // Récupérer l'utilisateur depuis le serveur si le token est valide
                                                fetch(`http://localhost:5000/users/session/${decoded.id}`)
                                                    .then(response => response.json())
                                                    .then(data => {
                                                        if (data && data.username) {
                                                            // Mettre à jour le nom d'utilisateur dans le DOM
                                                            document.getElementById('username-container').innerText = data.username.toUpperCase();;
                                                        } else {
                                                            console.error('Session invalide, redirection...');
                                                            localStorage.removeItem('jwt-token');
                                                            window.location.href = '/login';
                                                        }
                                                    })
                                                    .catch(error => {
                                                        console.error('Erreur lors de la récupération de l’utilisateur:', error);
                                                        window.location.href = '/login';
                                                    });
                                            } catch (error) {
                                                console.error('Token invalide:', error);
                                                localStorage.removeItem('jwt-token');
                                                window.location.href = '/login';
                                            }
                                        } 
                                    }
                                
                                    // Appeler la fonction useAuth pour afficher le username
                                    useAuth();
                                </script>  

                                
                                <button type="button" class="sidebar-btn nav-right-link" data-bs-toggle="offcanvas"
                                    data-bs-target="#sidebarPopup">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <!-- navbar end-->

    </header>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
  <!-- footer area -->
  <footer class="footer-area">
    <div class="footer-widget">
        <div class="container">
            <div class="footer-widget-wrap pt-100 pb-80">
                <div class="row g-4">
                    <div class="col-lg-5">
                        <div class="footer-widget-box about-us">
                            <a href="#" class="footer-logo">
                                <img src="assets/img/logo/logo.png" alt="">
                            </a>
                            <p class="mb-4">
                                We are many variations of passages available but the majority have suffered
                                alteration
                                some form by injected humour words believable.
                            </p>
                            <div class="footer-newsletter">
                                <h6>Subscribe Our Newsletter</h6>
                                <div class="newsletter-form">
                                    <form action="#">
                                        <div class="form-group">
                                            <div class="form-icon">
                                                <i class="far fa-envelopes"></i>
                                                <input type="email" class="form-control" placeholder="Your Email">
                                                <button class="theme-btn" type="submit">
                                                    Subscribe <span class="far fa-paper-plane"></span>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-lg-2">
                        <div class="footer-widget-box list">
                            <h4 class="footer-widget-title">Company</h4>
                            <ul class="footer-list">
                                <li><a href="about.html"><i class="far fa-angle-double-right"></i>About Us</a></li>
                                <li><a href="blog.html"><i class="far fa-angle-double-right"></i>Update News</a></li>
                                <li><a href="testimonial.html"><i class="far fa-angle-double-right"></i>Testimonials</a>
                                </li>
                                <li><a href="contact.html"><i class="far fa-angle-double-right"></i>Contact Us</a></li>
                                <li><a href="terms.html"><i class="far fa-angle-double-right"></i>Terms Of Service</a></li>
                                <li><a href="privacy.html"><i class="far fa-angle-double-right"></i>Privacy policy</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-6 col-lg-2">
                        <div class="footer-widget-box list">
                            <h4 class="footer-widget-title">Services</h4>
                            <ul class="footer-list">
                                <li><a href="service.html"><i class="far fa-angle-double-right"></i>Assisted Living</a></li>
                                <li><a href="service.html"><i class="far fa-angle-double-right"></i>Nursing Care</a></li>
                                <li><a href="service.html"><i class="far fa-angle-double-right"></i>Medical & Health</a></li>
                                <li><a href="service.html"><i class="far fa-angle-double-right"></i>Physical Assistance</a></li>
                                <li><a href="service.html"><i class="far fa-angle-double-right"></i>Residential Care</a></li>
                                <li><a href="service.html"><i class="far fa-angle-double-right"></i>Personal Care</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="footer-widget-box">
                            <h4 class="footer-widget-title">Get In Touch</h4>
                            <ul class="footer-contact">
                                <li>
                                    <div class="icon">
                                        <i class="far fa-location-dot"></i>
                                    </div>
                                    <div class="content">
                                        <h6>Our Address</h6>
                                        <p>25/AB Milford Road, New York, USA</p>
                                    </div>
                                </li>
                                <li>
                                    <div class="icon">
                                        <i class="far fa-phone"></i>
                                    </div>
                                    <div class="content">
                                        <h6>Call Us</h6>
                                        <a href="tel:+21236547898">+2 123 654 7898</a>
                                    </div>
                                </li>
                                <li>
                                    <div class="icon">
                                        <i class="far fa-envelope"></i>
                                    </div>
                                    <div class="content">
                                        <h6>Mail Us</h6>
                                        <a href="mailto:info@example.com">info@example.com</a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="copyright">
            <div class="row">
                <div class="col-md-6 align-self-center">
                    <p class="copyright-text">
                        &copy; Copyright <span id="date"></span> <a href="#"> Lovcare </a> All Rights Reserved.
                    </p>
                </div>
                <div class="col-md-6 align-self-center">
                    <ul class="footer-social">
                        <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                        <li><a href="#"><i class="fab fa-x-twitter"></i></a></li>
                        <li><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
                        <li><a href="#"><i class="fab fa-youtube"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- footer area end -->


<!-- scroll-top -->
<a href="#" id="scroll-top"><i class="far fa-arrow-up"></i></a>
<!-- scroll-top end -->


<!-- js -->
<script src="assets/js/jquery-3.7.1.min.js"></script>
<script src="assets/js/modernizr.min.js"></script>
<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/imagesloaded.pkgd.min.js"></script>
<script src="assets/js/jquery.magnific-popup.min.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/jquery.appear.min.js"></script>
<script src="assets/js/jquery.easing.min.js"></script>
<script src="assets/js/owl.carousel.min.js"></script>
<script src="assets/js/counter-up.js"></script>
<script src="assets/js/jquery.nice-select.min.js"></script>
<script src="assets/js/wow.min.js"></script>
<script src="assets/js/main.js"></script>
</html>